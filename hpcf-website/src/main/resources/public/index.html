<!DOCTYPE html>
<html lang="en">

<head>
    <!-- =========================================
         SEO & Metadata
    ========================================== -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Primary Meta Tags -->
    <title>Home | Higher Praise Christian Fellowship</title>
    <meta name="title" content="Home | Higher Praise Christian Fellowship">
    <meta name="description" content="Welcome to Higher Praise Christian Fellowship in La Mesa, CA. Join us for Sunday worship at 10:00 AM, Bible studies, and community outreach. A place where no one walks alone.">
    <meta name="keywords" content="Higher Praise Christian Fellowship, HPCF, Church La Mesa, Christian Church San Diego, Worship Service, Bible Study, Youth Ministry, La Mesa Church">
    <meta name="author" content="Higher Praise Christian Fellowship">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://higherpraisecf.org/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://higherpraisecf.org/">
    <meta property="og:title" content="Home | Higher Praise Christian Fellowship">
    <meta property="og:description" content="Welcome to Higher Praise Christian Fellowship in La Mesa, CA. Join us for Sunday worship, Bible studies, and community outreach. A place where no one walks alone.">
    <meta property="og:image" content="https://res.cloudinary.com/ddnhp0hzd/image/upload/v1763924716/HPCF_logo_gold_dkwnzi.png">
    <meta property="og:site_name" content="Higher Praise Christian Fellowship">
    <meta property="og:locale" content="en_US">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://higherpraisecf.org/">
    <meta property="twitter:title" content="Home | Higher Praise Christian Fellowship">
    <meta property="twitter:description" content="Welcome to Higher Praise Christian Fellowship in La Mesa, CA. Join us for Sunday worship, Bible studies, and community outreach.">
    <meta property="twitter:image" content="https://res.cloudinary.com/ddnhp0hzd/image/upload/v1763924716/HPCF_logo_gold_dkwnzi.png">

    <!-- JSON-LD Schema (Church) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Church",
      "name": "Higher Praise Christian Fellowship",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "7309 El Cajon Blvd",
        "addressLocality": "La Mesa",
        "addressRegion": "CA",
        "postalCode": "91942",
        "addressCountry": "US"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 32.772,
        "longitude": -117.042
      },
      "url": "https://higherpraisecf.org/",
      "telephone": "+16195551200",
      "logo": "https://res.cloudinary.com/ddnhp0hzd/image/upload/v1763924716/HPCF_logo_gold_dkwnzi.png",
      "foundingDate": "1997",
      "founder": {
        "@type": "Person",
        "name": "Apostle Donald Jones Jr."
      },
      "openingHoursSpecification": [
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": "Sunday",
          "opens": "10:00",
          "closes": "12:00"
        },
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": "Wednesday",
          "opens": "19:00",
          "closes": "20:30"
        }
      ],
      "sameAs": [
        "https://www.facebook.com/profile.php?id=100071166876525",
        "https://www.instagram.com/higherpraise_cf",
        "https://www.youtube.com/@higherpraise_hpcf"
      ]
    }
    </script>

    <!-- =========================================
         Styles & Resources
    ========================================== -->
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <!-- Favicon -->
    <link rel="icon" href="https://res.cloudinary.com/ddnhp0hzd/image/upload/v1763924716/HPCF_logo_gold_dkwnzi.png" type="image/png">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .font-playfair { font-family: 'Playfair Display', serif; }
        
        /* Mobile Menu */
        #mobile-menu {
            transition: max-height 0.3s ease-in-out;
            overflow: hidden;
            max-height: 0;
        }
        #mobile-menu.open {
            max-height: 400px;
        }
        
        /* Hero Background with Image */
        .hero-section {
            position: relative;
            overflow: hidden;
        }
        .hero-section::before {
            content: '';
            position: absolute;
            inset: 0;
            /* TODO: Replace with church hero image URL */
            background-image: url('https://res.cloudinary.com/ddnhp0hzd/image/upload/v1766343331/together2_i9jr4i.jpg');
            background-size: cover;
            background-position: center;
            opacity: 0.15;
            z-index: 0;
        }
        .hero-section::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(86, 23, 34, 0.95) 0%, rgba(124, 38, 57, 0.92) 50%, rgba(166, 63, 78, 0.90) 100%);
            z-index: 1;
        }
        .hero-content {
            position: relative;
            z-index: 2;
        }
        
        /* Widget Animation */
        .fade-in-up { animation: fadeInUp 0.3s ease-out forwards; }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Custom scrollbar for widget */
        #widget-content::-webkit-scrollbar { width: 4px; }
        #widget-content::-webkit-scrollbar-thumb { background-color: #E9D8A6; border-radius: 4px; }
    </style>
</head>

<body class="bg-gradient-to-br from-[#561722] via-[#7C2639] to-[#A63F4E] text-white min-h-screen flex flex-col">

    <div id="root" class="flex-grow">
        <!-- =========================================
             HEADER - Consistent across all pages
        ========================================== -->
        <header class="sticky top-0 z-50 bg-[#7C2639]/95 backdrop-blur-md border-b border-white/10 shadow-md">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-20">
                    <!-- Logo -->
                    <a href="/" class="flex items-center gap-3 group">
                        <img src="https://res.cloudinary.com/ddnhp0hzd/image/upload/v1763924716/HPCF_logo_gold_dkwnzi.png"
                            alt="HPCF Logo" class="h-12 md:h-16 w-auto transition-transform group-hover:scale-105">
                        <div class="text-lg md:text-xl font-playfair italic leading-tight">
                            Higher Praise <span class="block md:inline text-[#E9D8A6]">Christian Fellowship</span>
                        </div>
                    </a>

                    <!-- Desktop Navigation -->
                    <nav class="hidden md:flex items-center gap-6 lg:gap-8 text-sm font-medium">
                        <a href="/about/" class="text-white hover:text-[#E9D8A6] transition">About</a>
                        <a href="/ministries/" class="text-white hover:text-[#E9D8A6] transition">Ministries</a>
                        <a href="/connect/" class="text-white hover:text-[#E9D8A6] transition">Connect</a>
                        <a href="/events/" class="text-white hover:text-[#E9D8A6] transition">Events</a>
                        <a href="/give/" class="text-white hover:text-[#E9D8A6] transition">Give</a>
                        <a href="/connect/"
                            class="bg-[#E9D8A6] text-[#561722] hover:bg-[#EED9B7] rounded-full px-5 py-2 text-sm font-bold shadow-lg transition-all hover:-translate-y-0.5 ml-2">Join Us</a>
                    </nav>

                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-btn" class="md:hidden text-[#E9D8A6] focus:outline-none p-2"
                        aria-label="Toggle Menu" aria-expanded="false">
                        <i class="fa-solid fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu Dropdown -->
            <div id="mobile-menu" class="md:hidden bg-[#561722] border-t border-white/10">
                <nav class="flex flex-col p-4 space-y-3 text-center">
                    <a href="/about/" class="text-white hover:text-[#E9D8A6] font-medium py-2 transition">About</a>
                    <a href="/ministries/" class="text-white hover:text-[#E9D8A6] font-medium py-2 transition">Ministries</a>
                    <a href="/connect/" class="text-white hover:text-[#E9D8A6] font-medium py-2 transition">Connect</a>
                    <a href="/events/" class="text-white hover:text-[#E9D8A6] font-medium py-2 transition">Events</a>
                    <a href="/give/" class="text-white hover:text-[#E9D8A6] font-medium py-2 transition">Give</a>
                    <a href="/connect/"
                        class="bg-[#E9D8A6] text-[#561722] rounded-full px-5 py-2 font-bold inline-block mx-auto mt-2 hover:bg-[#EED9B7] transition">Join Us</a>
                </nav>
            </div>
        </header>
        <!-- END HEADER -->

        <!-- Hero Section with Background Image -->
        <section class="hero-section text-center py-20 md:py-32 px-4">
            <div class="hero-content max-w-4xl mx-auto">
                <h1 class="text-4xl md:text-6xl lg:text-7xl font-playfair italic mb-6">
                    A Season of <span class="text-[#E9D8A6] font-semibold not-italic">Fulfilment</span>
                </h1>
                <p class="max-w-2xl mx-auto text-[#EED9B7] text-lg md:text-xl mb-10 leading-relaxed">
                    "For everyone born of God overcomes the world. This is the victory that has overcome the world—our faith." – 1 John 5:4-5
                </p>
                <div class="flex flex-col sm:flex-row justify-center gap-4">
                    <a href="/connect/" class="bg-[#E9D8A6] text-[#561722] hover:bg-[#EED9B7] rounded-full font-bold px-8 py-3 shadow-md transition-all hover:shadow-xl">
                        Plan Your Visit
                    </a>
                    <a href="https://www.youtube.com/@higherpraise_hpcf" target="_blank" rel="noopener noreferrer" class="border-2 border-[#E9D8A6] text-[#E9D8A6] rounded-full hover:bg-[#E9D8A6] hover:text-[#561722] font-bold px-8 py-3 transition-colors">
                        Watch Sermon
                    </a>
                </div>
            </div>
        </section>

        <!-- Our Vision Section (Mantra slide removed) -->
        <section id="about" class="bg-white text-[#561722] py-20 px-6">
            <div class="max-w-6xl mx-auto text-center">
                <h2 class="text-3xl md:text-5xl font-playfair mb-6 font-bold">Our Vision</h2>
                <p class="max-w-3xl mx-auto text-lg md:text-xl text-gray-700 leading-relaxed mb-16">
                    To reconcile the lost with our Lord Jesus Christ and project an environment that is conducive to the wholeness of the person.
                </p>

                <!-- Responsive Slider Container - 2 Slides Only (Mantra removed) -->
                <div id="slider-container" class="relative max-w-5xl mx-auto rounded-2xl shadow-2xl overflow-hidden text-left bg-gray-900 aspect-video md:aspect-[21/9]">
                    <!-- Slides Track -->
                    <div id="slides-track" class="flex transition-transform duration-700 ease-in-out h-full">
                        <!-- Slide 1: Purpose -->
                        <div class="w-full flex-shrink-0 relative h-full">
                            <img src="https://res.cloudinary.com/ddnhp0hzd/image/upload/v1766343331/apostle4_pvwgfh.jpg" alt="Growth" class="absolute inset-0 w-full h-full object-cover">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent"></div>
                            <div class="absolute inset-0 p-8 md:p-16 flex flex-col justify-end text-white">
                                <i class="fa-solid fa-calendar-check text-[#E9D8A6] text-4xl mb-4"></i>
                                <h3 class="text-2xl md:text-4xl font-playfair font-bold mb-2 text-[#E9D8A6]">Purpose</h3>
                                <p class="text-base md:text-xl text-white/90 max-w-2xl">To experience growth and maturation individually and corporately — establishing a Kingdom culture.</p>
                            </div>
                        </div>
                        <!-- Slide 2: Kingdom Endeavor -->
                        <div class="w-full flex-shrink-0 relative h-full">
                            <img src="https://res.cloudinary.com/ddnhp0hzd/image/upload/v1768078384/women_qqxtu0.jpg" alt="Worship" class="absolute inset-0 w-full h-full object-cover">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent"></div>
                            <div class="absolute inset-0 p-8 md:p-16 flex flex-col justify-end text-white">
                                <i class="fa-solid fa-circle-play text-[#E9D8A6] text-4xl mb-4"></i>
                                <h3 class="text-2xl md:text-4xl font-playfair font-bold mb-2 text-[#E9D8A6]">Kingdom Endeavor</h3>
                                <p class="text-base md:text-xl text-white/90 max-w-2xl">To create an environment that promotes divine revelation and fresh anointing to the glory of the King.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Navigation Arrows -->
                    <button id="prev-slide" class="absolute top-1/2 left-4 -translate-y-1/2 bg-black/30 hover:bg-[#E9D8A6] hover:text-[#561722] text-white p-3 rounded-full transition backdrop-blur-sm z-10">
                        <i class="fa-solid fa-chevron-left text-xl"></i>
                    </button>
                    <button id="next-slide" class="absolute top-1/2 right-4 -translate-y-1/2 bg-black/30 hover:bg-[#E9D8A6] hover:text-[#561722] text-white p-3 rounded-full transition backdrop-blur-sm z-10">
                        <i class="fa-solid fa-chevron-right text-xl"></i>
                    </button>

                    <!-- Navigation Dots (2 dots now) -->
                    <div id="slider-dots" class="absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-3 z-10">
                        <button class="slider-dot w-3 h-3 rounded-full bg-white transition-all duration-300 hover:scale-125" aria-label="Slide 1"></button>
                        <button class="slider-dot w-3 h-3 rounded-full bg-white/50 transition-all duration-300 hover:scale-125" aria-label="Slide 2"></button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Weekly Gatherings Section -->
        <section id="events" class="bg-[#7C2639] py-24 px-6">
            <div class="max-w-6xl mx-auto text-center">
                <h2 class="text-3xl md:text-5xl font-playfair text-[#E9D8A6] mb-12 font-bold">Weekly Gatherings</h2>
                <div class="grid md:grid-cols-3 gap-8">
                    <!-- Sunday Worship -->
                    <div class="bg-[#561722] rounded-2xl p-8 text-left shadow-xl hover:transform hover:-translate-y-2 transition duration-300 border border-[#A63F4E]">
                        <div class="text-[#E9D8A6] text-3xl mb-4"><i class="fa-solid fa-church"></i></div>
                        <h3 class="text-xl font-bold text-[#E9D8A6] mb-2 font-playfair">Sunday Worship</h3>
                        <p class="text-[#EED9B7] mb-6 text-sm leading-relaxed">Join us this Sunday at 10:00 AM for a powerful service of worship and word.</p>
                        <a href="/events/" class="text-[#E9D8A6] font-bold text-sm uppercase tracking-wide hover:underline">Learn More &rarr;</a>
                    </div>
                    <!-- Bible Study -->
                    <div class="bg-[#561722] rounded-2xl p-8 text-left shadow-xl hover:transform hover:-translate-y-2 transition duration-300 border border-[#A63F4E]">
                        <div class="text-[#E9D8A6] text-3xl mb-4"><i class="fa-solid fa-book-open"></i></div>
                        <h3 class="text-xl font-bold text-[#E9D8A6] mb-2 font-playfair">Bible Study</h3>
                        <p class="text-[#EED9B7] mb-6 text-sm leading-relaxed">Deepen your faith. Thursday at 7:00 PM. Interactive study for all ages.</p>
                        <a href="/events/" class="text-[#E9D8A6] font-bold text-sm uppercase tracking-wide hover:underline">Learn More &rarr;</a>
                    </div>
                    <!-- Prayer Night -->
                    <div class="bg-[#561722] rounded-2xl p-8 text-left shadow-xl hover:transform hover:-translate-y-2 transition duration-300 border border-[#A63F4E]">
                        <div class="text-[#E9D8A6] text-3xl mb-4"><i class="fa-solid fa-hands-praying"></i></div>
                        <h3 class="text-xl font-bold text-[#E9D8A6] mb-2 font-playfair">Prayer Night</h3>
                        <p class="text-[#EED9B7] mb-6 text-sm leading-relaxed">Corporate prayer and intercession. Wednesdays at 6:30 PM.</p>
                        <a href="/events/" class="text-[#E9D8A6] font-bold text-sm uppercase tracking-wide hover:underline">Learn More &rarr;</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Life at HPCF Gallery -->
        <section id="gallery" class="bg-white text-[#561722] py-24 px-6">
            <div class="max-w-6xl mx-auto">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-5xl font-playfair mb-4 font-bold">Life at Higher Praise</h2>
                    <a href="https://instagram.com/higherpraise_cf" target="_blank" class="text-[#7C2639] hover:text-[#A63F4E] font-bold text-lg inline-flex items-center gap-2 transition">
                        <i class="fa-brands fa-instagram text-2xl"></i> @higherpraise_cf
                    </a>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-4">
                    <!-- Gallery Items (9) with actual images -->
                    <div class="relative group aspect-square bg-gray-100 overflow-hidden rounded-lg">
                        <img src="https://res.cloudinary.com/ddnhp0hzd/image/upload/v1765133396/outreach2_ugbx8m.jpg" alt="Outreach" class="object-cover w-full h-full transition duration-700 group-hover:scale-110">
                        <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition duration-300 flex items-center justify-center gap-4 text-white">
                            <span><i class="fa-solid fa-heart"></i></span>
                        </div>
                    </div>
                    <div class="relative group aspect-square bg-gray-100 overflow-hidden rounded-lg">
                        <img src="https://res.cloudinary.com/ddnhp0hzd/image/upload/v1768078389/outreach_nmiycv.jpg" alt="Community" class="object-cover w-full h-full transition duration-700 group-hover:scale-110">
                        <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition duration-300 flex items-center justify-center gap-4 text-white">
                            <span><i class="fa-solid fa-heart"></i></span>
                        </div>
                    </div>
                    <div class="relative group aspect-square bg-gray-100 overflow-hidden rounded-lg">
                        <img src="https://res.cloudinary.com/ddnhp0hzd/image/upload/v1768078387/outreach3_wmig83.jpg" alt="Service" class="object-cover w-full h-full transition duration-700 group-hover:scale-110">
                        <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition duration-300 flex items-center justify-center gap-4 text-white">
                            <span><i class="fa-solid fa-heart"></i></span>
                        </div>
                    </div>
                    <div class="relative group aspect-square bg-gray-100 overflow-hidden rounded-lg">
                        <img src="https://res.cloudinary.com/ddnhp0hzd/image/upload/v1768078384/women_qqxtu0.jpg" alt="Women's Ministry" class="object-cover w-full h-full transition duration-700 group-hover:scale-110">
                        <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition duration-300 flex items-center justify-center gap-4 text-white">
                            <span><i class="fa-solid fa-heart"></i></span>
                        </div>
                    </div>
                    <div class="relative group aspect-square bg-gray-100 overflow-hidden rounded-lg">
                        <img src="https://res.cloudinary.com/ddnhp0hzd/image/upload/v1766343331/apostle4_pvwgfh.jpg" alt="Leadership" class="object-cover w-full h-full transition duration-700 group-hover:scale-110">
                        <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition duration-300 flex items-center justify-center gap-4 text-white">
                            <span><i class="fa-solid fa-heart"></i></span>
                        </div>
                    </div>
                    <div class="relative group aspect-square bg-gray-100 overflow-hidden rounded-lg">
                        <img src="https://res.cloudinary.com/ddnhp0hzd/image/upload/v1766343331/together2_i9jr4i.jpg" alt="Fellowship" class="object-cover w-full h-full transition duration-700 group-hover:scale-110">
                        <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition duration-300 flex items-center justify-center gap-4 text-white">
                            <span><i class="fa-solid fa-heart"></i></span>
                        </div>
                    </div>
                    <div class="relative group aspect-square bg-gray-100 overflow-hidden rounded-lg">
                        <img src="https://res.cloudinary.com/ddnhp0hzd/image/upload/v1765133388/outreach4_i2g7a9.jpg" alt="Outreach" class="object-cover w-full h-full transition duration-700 group-hover:scale-110">
                        <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition duration-300 flex items-center justify-center gap-4 text-white">
                            <span><i class="fa-solid fa-heart"></i></span>
                        </div>
                    </div>
                    <div class="relative group aspect-square bg-gray-100 overflow-hidden rounded-lg">
                        <img src="https://res.cloudinary.com/ddnhp0hzd/image/upload/v1765133394/media_etv8hg.jpg" alt="Media Ministry" class="object-cover w-full h-full transition duration-700 group-hover:scale-110">
                        <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition duration-300 flex items-center justify-center gap-4 text-white">
                            <span><i class="fa-solid fa-heart"></i></span>
                        </div>
                    </div>
                    <div class="relative group aspect-square bg-gray-100 overflow-hidden rounded-lg">
                        <img src="https://res.cloudinary.com/ddnhp0hzd/image/upload/v1765133393/sundayteachers_vlabif.jpg" alt="Teaching" class="object-cover w-full h-full transition duration-700 group-hover:scale-110">
                        <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition duration-300 flex items-center justify-center gap-4 text-white">
                            <span><i class="fa-solid fa-heart"></i></span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- =========================================
             FOOTER - Consistent across all pages
        ========================================== -->
        <footer class="bg-[#561722] border-t border-[#E9D8A6]/20 text-[#E9D8A6]">
            <div
                class="max-w-7xl mx-auto px-6 md:px-8 py-12 md:py-16 grid md:grid-cols-3 gap-10 md:gap-12 text-center md:text-left">
                <div class="flex flex-col items-center md:items-start">
                    <img src="https://res.cloudinary.com/ddnhp0hzd/image/upload/v1763924716/HPCF_logo_gold_dkwnzi.png"
                        alt="HPCF Logo" class="h-20 md:h-24 w-auto mb-6">
                    <h3 class="text-xl md:text-2xl font-playfair font-bold mb-4">Higher Praise Christian Fellowship</h3>
                    <p class="text-sm text-[#EED9B7]/90 leading-relaxed max-w-sm">
                        "You will never walk alone at Higher Praise Christian Fellowship." No one gets left behind. Our
                        mission is to reconcile the lost to Christ.
                    </p>
                </div>

               <div class="flex flex-col items-center md:items-start">
                    <h3 class="text-lg font-bold mb-4 uppercase tracking-wider">Quick Links</h3>
                    <ul class="space-y-3 text-sm text-[#EED9B7]/80">
                        <li><a href="/about/" class="hover:text-white transition-colors">About Us</a></li>
                        <li><a href="/ministries/" class="hover:text-white transition-colors">Ministries</a></li>
                        <li><a href="/events/" class="hover:text-white transition-colors">Events</a></li>
                        <li><a href="/give/" class="hover:text-white transition-colors">Give</a></li>
                        <li><a href="/connect/" class="hover:text-white transition-colors">Contact</a></li>
                    </ul>
                </div>

                <div class="flex flex-col items-center md:items-start">
                    <h3 class="text-lg font-bold mb-4 uppercase tracking-wider">Connect</h3>
                    <address class="not-italic text-sm text-[#EED9B7]/80 space-y-1 mb-4">
                        <p>7309 El Cajon Blvd, La Mesa, CA 91942</p>
                        <p>Email: <a href="mailto:contact@higherpraisecf.org"
                                class="hover:text-white transition">contact@higherpraisecf.org</a></p>
                        <p>Phone: <a href="tel:+16195551200" class="hover:text-white transition">(619) 555-1200</a></p>
                    </address>
                    <div class="flex gap-4 text-2xl text-[#EED9B7] mb-6">
                        <a href="mailto:contact@higherpraisecf.org" aria-label="Email"
                            class="hover:text-white transition hover:-translate-y-1"><i
                                class="fa-solid fa-envelope"></i></a>
                        <a href="https://www.facebook.com/profile.php?id=100071166876525" target="_blank"
                            rel="noopener noreferrer" aria-label="Facebook"
                            class="hover:text-white transition hover:-translate-y-1"><i class="fab fa-facebook"></i></a>
                        <a href="https://www.youtube.com/@higherpraise_hpcf" target="_blank" rel="noopener noreferrer"
                            aria-label="YouTube" class="hover:text-white transition hover:-translate-y-1"><i
                                class="fab fa-youtube"></i></a>
                        <a href="https://www.instagram.com/higherpraise_cf" target="_blank" rel="noopener noreferrer"
                            aria-label="Instagram" class="hover:text-white transition hover:-translate-y-1"><i
                                class="fab fa-instagram"></i></a>
                        <a href="https://www.tiktok.com/@higherpraise_cf" target="_blank" rel="noopener noreferrer"
                            aria-label="TikTok" class="hover:text-white transition hover:-translate-y-1"><i
                                class="fab fa-tiktok"></i></a>
                    </div>
                    <div class="w-full rounded-lg overflow-hidden border border-[#E9D8A6]/20 shadow-lg h-36">
                        <iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0"
                            marginwidth="0"
                            src="https://maps.google.com/maps?q=7309+El+Cajon+Blvd,+La+Mesa,+CA+91942&t=&z=14&ie=UTF8&iwloc=B&output=embed"
                            title="Church Location" loading="lazy"></iframe>
                    </div>
                </div>
            </div>

            <div class="text-center text-[#EED9B7]/60 text-xs py-6 border-t border-[#E9D8A6]/20">
                © <span id="footer-year"></span> Higher Praise Christian Fellowship. All Rights Reserved.
            </div>
        </footer>
        <!-- END FOOTER -->
    </div>

    <!-- Faith Tools Widget (Cleaner, Smaller) -->
    <div id="widget-container" class="fixed bottom-5 right-5 z-50 flex flex-col items-end pointer-events-none">
        <!-- Window -->
        <div id="widget-window" class="hidden mb-3 w-72 bg-white rounded-xl shadow-2xl overflow-hidden border border-[#E9D8A6] text-[#561722] fade-in-up h-[28rem] flex flex-col pointer-events-auto">
            <!-- Header -->
            <div class="bg-[#561722] text-[#E9D8A6] px-4 py-3 flex justify-between items-center shadow-md z-10">
                <h3 id="widget-title" class="font-playfair font-bold text-base">Faith Tools</h3>
                <button onclick="toggleWidget()" class="hover:text-white transition"><i class="fa-solid fa-xmark text-lg"></i></button>
            </div>
            <!-- Content -->
            <div id="widget-content" class="p-3 overflow-y-auto flex-grow flex flex-col bg-gray-50">
                <!-- Injected via JS -->
            </div>
        </div>

        <!-- Toggle Button (Smaller, Cleaner) -->
        <button onclick="toggleWidget()" class="pointer-events-auto bg-[#E9D8A6] text-[#561722] hover:bg-white hover:text-[#7C2639] w-12 h-12 rounded-full shadow-xl flex items-center justify-center text-xl transition-all transform hover:scale-105 border-2 border-[#561722] focus:outline-none focus:ring-2 focus:ring-[#E9D8A6]/50">
            <i class="fa-solid fa-cross"></i>
        </button>
    </div>

    <!-- Scripts -->
    <script>
        document.getElementById('footer-year').textContent = new Date().getFullYear();

        // Mobile Menu Toggle
        const menuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        menuBtn.addEventListener('click', () => {
            const isOpen = mobileMenu.classList.toggle('open');
            mobileMenu.style.maxHeight = isOpen ? mobileMenu.scrollHeight + 'px' : '0';
            menuBtn.setAttribute('aria-expanded', isOpen);
            const icon = menuBtn.querySelector('i');
            icon.classList.toggle('fa-bars', !isOpen);
            icon.classList.toggle('fa-xmark', isOpen);
        });

        // --- Slideshow Logic (2 slides now) ---
        const slidesTrack = document.getElementById('slides-track');
        if (slidesTrack) {
            const slides = Array.from(slidesTrack.children);
            const prevButton = document.getElementById('prev-slide');
            const nextButton = document.getElementById('next-slide');
            const dots = Array.from(document.getElementById('slider-dots').children);
            let currentIndex = 0;

            function updateSlider(index) {
                slidesTrack.style.transform = `translateX(-${index * 100}%)`;
                dots.forEach((dot, i) => {
                    dot.classList.toggle('bg-white', i === index);
                    dot.classList.toggle('bg-white/50', i !== index);
                });
                currentIndex = index;
            }

            nextButton.addEventListener('click', () => updateSlider((currentIndex + 1) % slides.length));
            prevButton.addEventListener('click', () => updateSlider((currentIndex - 1 + slides.length) % slides.length));
            dots.forEach((dot, index) => dot.addEventListener('click', () => updateSlider(index)));
            
            // Auto play
            setInterval(() => updateSlider((currentIndex + 1) % slides.length), 6000);
        }

        // --- Widget Logic ---
        const widgetWindow = document.getElementById('widget-window');
        const widgetContent = document.getElementById('widget-content');
        const widgetTitle = document.getElementById('widget-title');
        
        // Encouragement Data
        const encouragementData = [
            { text: "You are a chosen people, a royal priesthood, a holy nation.", ref: "1 Peter 2:9" },
            { text: "The Lord will fight for you; you need only to be still.", ref: "Exodus 14:14" },
            { text: "This is the confidence we have in approaching God: that if we ask anything according to his will, he hears us.", ref: "1 John 5:14" },
            { text: "I have loved you with an everlasting love; I have drawn you with unfailing kindness.", ref: "Jeremiah 31:3" },
            { text: "Have I not commanded you? Be strong and courageous. Do not be afraid.", ref: "Joshua 1:9" },
            { text: "For I know the plans I have for you, declares the Lord, plans to prosper you and not to harm you.", ref: "Jeremiah 29:11" },
            { text: "So do not fear, for I am with you; do not be dismayed, for I am your God.", ref: "Isaiah 41:10" },
            { text: "The joy of the Lord is your strength.", ref: "Nehemiah 8:10" },
            { text: "Cast all your anxiety on him because he cares for you.", ref: "1 Peter 5:7" },
            { text: "I can do all this through him who gives me strength.", ref: "Philippians 4:13" },
            { text: "And we know that in all things God works for the good of those who love him.", ref: "Romans 8:28" },
            { text: "Peace I leave with you; my peace I give you.", ref: "John 14:27" },
            { text: "The Lord is my shepherd, I lack nothing.", ref: "Psalm 23:1" },
            { text: "Be still, and know that I am God.", ref: "Psalm 46:10" },
            { text: "Trust in the Lord with all your heart and lean not on your own understanding.", ref: "Proverbs 3:5" },
            { text: "Come to me, all you who are weary and burdened, and I will give you rest.", ref: "Matthew 11:28" }
        ];

        // Trivia Data (RESTORED)
        const triviaData = [
            { q: "The Bible is the most popular book ever written.", a: "True", type: "tf", diff: "easy" },
            { q: "Because Jesus was God, he didn't obey his parents' rules.", a: "False", type: "tf", diff: "easy" },
            { q: "Jesus turned water into Pepsi.", a: "False", type: "tf", diff: "easy" },
            { q: "Jesus stayed away from people with bad reputations?", a: "False", type: "tf", diff: "easy" },
            { q: "Everywhere he went, people loved Jesus and believed his message?", a: "False", type: "tf", diff: "easy" },
            { q: "Jesus said washing hands is never important.", a: "False", type: "tf", diff: "easy" },
            { q: "Jesus asked the children to stay back while he was teaching.", a: "False", type: "tf", diff: "easy" },
            { q: "Jesus didn't know that he was going to be arrested and killed.", a: "False", type: "tf", diff: "easy" },
            { q: "The Bible was first written in the English language?", a: "False", type: "tf", diff: "easy" },
            { q: "Jesus was an only child.", a: "False", type: "tf", diff: "easy" },
            { q: "David wrote the entire book of Psalms.", a: "False", type: "tf", diff: "medium" },
            { q: "John the Baptist wore clothes made of goat hair.", a: "False", type: "tf", diff: "medium" },
            { q: "At first, Jesus' family tried to stop his ministry and said he was crazy.", a: "True", type: "tf", diff: "medium" },
            { q: "Jesus said his true family was anyone who obeys God.", a: "True", type: "tf", diff: "medium" },
            { q: "Jesus would sometimes 'spit' as part of his healing miracles.", a: "True", type: "tf", diff: "medium" },
            { q: "When Jesus went to the Temple, he always used his inside voice.", a: "False", type: "tf", diff: "medium" },
            { q: "Jesus said only big money offerings were important to God.", a: "False", type: "tf", diff: "medium" },
            { q: "The Jewish leaders tried to set Jesus free.", a: "False", type: "tf", diff: "medium" },
            { q: "Peter raised a woman named Dorcas from the dead.", a: "True", type: "tf", diff: "medium" },
            { q: "Peter was rescued from prison by an angel.", a: "True", type: "tf", diff: "medium" },
            { q: "Paul had a vision of a man calling him to come over to Carthage.", a: "False", type: "tf", diff: "medium" },
            { q: "God sent an earthquake to rescue Paul and Silas from prison.", a: "True", type: "tf", diff: "medium" },
            { q: "Bananas are a Fruit of the Spirit.", a: "False", type: "tf", diff: "medium" },
            { q: "The opposite of the Fruit of the Spirit are called 'the works of the flesh'.", a: "True", type: "tf", diff: "medium" },
            { q: "The more words we say makes our prayers better.", a: "False", type: "tf", diff: "medium" },
            { q: "Ananias and Sapphira died after lying to the Apostles about their offering.", a: "True", type: "tf", diff: "hard" },
            { q: "What is the first book in the Bible?", a: "Genesis", w: ["Exodus", "Matthew", "Psalms"], type: "mc", diff: "easy" },
            { q: "How many days did God take to create the world?", a: "6", w: ["7", "3", "40"], type: "mc", diff: "easy" },
            { q: "Who was the first man?", a: "Adam", w: ["Moses", "Abraham", "Noah"], type: "mc", diff: "easy" },
            { q: "Who was the first woman?", a: "Eve", w: ["Sarah", "Mary", "Ruth"], type: "mc", diff: "easy" },
            { q: "Where did Adam and Eve live at the beginning?", a: "Garden of Eden", w: ["Canaan", "Egypt", "Jerusalem"], type: "mc", diff: "easy" },
            { q: "Who did God tell to build an ark?", a: "Noah", w: ["Moses", "David", "Abraham"], type: "mc", diff: "easy" },
            { q: "How many days/nights did it rain when Noah was on the ark?", a: "40", w: ["7", "12", "3"], type: "mc", diff: "easy" },
            { q: "What was God's sign to Noah?", a: "A rainbow", w: ["A dove", "A star", "An olive branch"], type: "mc", diff: "easy" },
            { q: "How many brothers did Joseph have?", a: "11", w: ["12", "10", "7"], type: "mc", diff: "easy" },
            { q: "What did Jacob give Joseph?", a: "A coat of many colors", w: ["A gold ring", "A sword", "A sheep"], type: "mc", diff: "easy" },
            { q: "God spoke to Moses in the desert through a...", a: "Burning bush", w: ["Cloud", "Dream", "Dove"], type: "mc", diff: "easy" },
            { q: "How many plagues did God send on Egypt?", a: "10", w: ["7", "12", "3"], type: "mc", diff: "easy" },
            { q: "What sea did Moses part?", a: "Red Sea", w: ["Dead Sea", "Sea of Galilee", "Mediterranean"], type: "mc", diff: "easy" },
            { q: "Where were the 10 Commandments given?", a: "Mt. Sinai", w: ["Mt. Zion", "Mt. Olives", "Mt. Carmel"], type: "mc", diff: "easy" },
            { q: "Who was the first king of Israel?", a: "Saul", w: ["David", "Solomon", "Samuel"], type: "mc", diff: "easy" },
            { q: "Daniel was thrown into the...", a: "Lion's den", w: ["Fiery furnace", "Prison", "Pit"], type: "mc", diff: "easy" },
            { q: "Who was Jesus' human mother?", a: "Mary", w: ["Martha", "Elizabeth", "Sarah"], type: "mc", diff: "easy" },
            { q: "Where was Jesus born?", a: "Bethlehem", w: ["Nazareth", "Jerusalem", "Jericho"], type: "mc", diff: "easy" },
            { q: "Who baptized Jesus?", a: "John the Baptist", w: ["Peter", "Paul", "James"], type: "mc", diff: "easy" },
            { q: "What job did Jesus have before preaching?", a: "Carpenter", w: ["Fisherman", "Shepherd", "Tentmaker"], type: "mc", diff: "easy" },
            { q: "Jesus walked on...", a: "Water", w: ["Fire", "Air", "Sand"], type: "mc", diff: "easy" },
            { q: "How many disciples did Jesus choose?", a: "12", w: ["10", "7", "3"], type: "mc", diff: "easy" },
            { q: "What is the shortest verse in the Bible?", a: "Jesus wept", w: ["God is love", "Pray always", "Rejoice"], type: "mc", diff: "easy" },
            { q: "Who betrayed Jesus?", a: "Judas Iscariot", w: ["Peter", "Thomas", "Pilate"], type: "mc", diff: "easy" },
            { q: "Who denied Jesus three times?", a: "Peter", w: ["Judas", "James", "John"], type: "mc", diff: "easy" },
            { q: "What day did Jesus rise from the dead?", a: "Sunday", w: ["Friday", "Saturday", "Monday"], type: "mc", diff: "easy" },
            { q: "Last book of the Bible?", a: "Revelation", w: ["Genesis", "Acts", "Malachi"], type: "mc", diff: "easy" },
            { q: "Which book did David write most of?", a: "Psalms", w: ["Proverbs", "Kings", "Samuel"], type: "mc", diff: "easy" },
            { q: "Shortest book in the Bible?", a: "3 John", w: ["Jude", "Obadiah", "Philemon"], type: "mc", diff: "medium" },
            { q: "How many books are in the Bible?", a: "66", w: ["39", "27", "72"], type: "mc", diff: "medium" },
            { q: "Which human author wrote the most books?", a: "Paul", w: ["Moses", "David", "Luke"], type: "mc", diff: "medium" },
            { q: "Which human author wrote the most words?", a: "Moses", w: ["Paul", "Luke", "David"], type: "mc", diff: "medium" },
            { q: "Giant killed by David?", a: "Goliath", w: ["Samson", "Saul", "Anak"], type: "mc", diff: "medium" },
            { q: "Wise King?", a: "Solomon", w: ["David", "Saul", "Hezekiah"], type: "mc", diff: "medium" },
            { q: "Strong judge who killed 1000 Philistines?", a: "Samson", w: ["Gideon", "David", "Saul"], type: "mc", diff: "medium" },
            { q: "Who was swallowed by a great fish?", a: "Jonah", w: ["Noah", "Moses", "Peter"], type: "mc", diff: "medium" },
            { q: "Who requested Jesus' body for burial?", a: "Joseph of Arimathea", w: ["Peter", "John", "Nicodemus"], type: "mc", diff: "medium" },
            { q: "How many days was Lazarus dead?", a: "4", w: ["3", "2", "1"], type: "mc", diff: "medium" },
            { q: "Who was the King of Salem?", a: "Melchizedek", w: ["Abimelech", "Og", "Sihon"], type: "mc", diff: "hard" },
            { q: "Father of John the Baptist?", a: "Zacharias", w: ["Zebedee", "Joseph", "Simeon"], type: "mc", diff: "hard" },
            { q: "Which tribe had no land inheritance?", a: "Levites", w: ["Judah", "Benjamin", "Dan"], type: "mc", diff: "hard" },
            { q: "King who ate grass like an ox?", a: "Nebuchadnezzar", w: ["Darius", "Cyrus", "Belshazzar"], type: "mc", diff: "hard" },
            { q: "Who was the father-in-law of Caiaphas?", a: "Annas", w: ["Pilate", "Herod", "Gamaliel"], type: "mc", diff: "hard" },
            { q: "Who gave Abram bread and wine?", a: "Melchizedek", w: ["Pharaoh", "Lot", "Abimelech"], type: "mc", diff: "hard" }
        ];

        let state = {
            currentView: 'home',
            trivia: { questions: [], currentIndex: 0, score: 0, mode: null, active: false }
        };

        function toggleWidget() {
            widgetWindow.classList.toggle('hidden');
            if (!widgetWindow.classList.contains('hidden') && state.currentView === 'home') renderWidgetHome();
        }

        function renderWidgetHome() {
            state.currentView = 'home';
            widgetTitle.textContent = "Faith Tools";
            widgetContent.innerHTML = `
                <div class="grid grid-cols-2 gap-2 h-full content-center">
                    <button onclick="renderTriviaMenu()" class="bg-[#561722] text-white p-3 rounded-lg hover:bg-[#7C2639] transition flex flex-col items-center justify-center text-center shadow group h-24">
                        <i class="fa-solid fa-gamepad text-2xl mb-1 text-[#E9D8A6] group-hover:scale-110 transition-transform"></i>
                        <span class="font-bold text-xs">Bible Trivia</span>
                    </button>
                    <button onclick="renderBibleApp()" class="bg-[#7C2639] text-white p-3 rounded-lg hover:bg-[#A63F4E] transition flex flex-col items-center justify-center text-center shadow group h-24">
                        <i class="fa-solid fa-book-bible text-2xl mb-1 text-[#E9D8A6] group-hover:scale-110 transition-transform"></i>
                        <span class="font-bold text-xs">Mini Bible</span>
                    </button>
                    <button onclick="renderEncouragement()" class="bg-[#A63F4E] text-white p-3 rounded-lg hover:bg-[#7C2639] transition flex flex-col items-center justify-center text-center shadow group h-24">
                        <i class="fa-solid fa-heart text-2xl mb-1 text-[#E9D8A6] group-hover:scale-110 transition-transform"></i>
                        <span class="font-bold text-xs">Encourage Me</span>
                    </button>
                    <button onclick="renderPrayerRequest()" class="bg-gray-700 text-white p-3 rounded-lg hover:bg-gray-800 transition flex flex-col items-center justify-center text-center shadow group h-24 border border-[#E9D8A6]/30">
                        <i class="fa-solid fa-hands-praying text-2xl mb-1 text-[#E9D8A6] group-hover:scale-110 transition-transform"></i>
                        <span class="font-bold text-xs">Prayer Request</span>
                    </button>
                </div>
            `;
        }

        /* --- TRIVIA FUNCTIONS --- */
        function renderTriviaMenu() {
            state.currentView = 'trivia-menu';
            widgetTitle.textContent = "Bible Trivia";
            const quick = localStorage.getItem('trivia_hs_quick') || 0;
            const infinite = localStorage.getItem('trivia_hs_infinite') || 0;
            const tf = localStorage.getItem('trivia_hs_tf') || 0;
            const hard = localStorage.getItem('trivia_hs_hard') || 0;

            widgetContent.innerHTML = `
                <div class="flex flex-col h-full space-y-2">
                    <button onclick="renderWidgetHome()" class="text-xs text-gray-500 hover:text-[#561722] mb-1 self-start flex items-center gap-1 font-bold"><i class="fa-solid fa-arrow-left"></i> Back</button>
                    <p class="text-center font-bold text-[#561722] text-sm mb-1">Select Game Mode</p>
                    <button onclick="initTrivia('quick')" class="bg-[#561722] text-white p-2.5 rounded-lg hover:bg-[#7C2639] transition flex justify-between items-center shadow text-sm"><span class="font-semibold">Quick Game (5)</span><span class="text-xs bg-black/20 px-2 py-0.5 rounded text-[#E9D8A6]">Best: ${quick}</span></button>
                    <button onclick="initTrivia('infinite')" class="bg-[#A63F4E] text-white p-2.5 rounded-lg hover:bg-[#7C2639] transition flex justify-between items-center shadow text-sm"><span class="font-semibold">Survival (∞)</span><span class="text-xs bg-black/20 px-2 py-0.5 rounded text-[#E9D8A6]">Best: ${infinite}</span></button>
                    <button onclick="initTrivia('tf')" class="bg-[#561722] text-white p-2.5 rounded-lg hover:bg-[#7C2639] transition flex justify-between items-center shadow text-sm"><span class="font-semibold">True or False (5)</span><span class="text-xs bg-black/20 px-2 py-0.5 rounded text-[#E9D8A6]">Best: ${tf}</span></button>
                    <button onclick="initTrivia('hard')" class="bg-gray-700 text-white p-2.5 rounded-lg hover:bg-gray-800 transition flex justify-between items-center shadow text-sm border border-[#E9D8A6]/30"><span class="font-semibold">Hard Mode (5)</span><span class="text-xs bg-white/20 px-2 py-0.5 rounded text-[#E9D8A6]">Best: ${hard}</span></button>
                </div>
            `;
        }

        function shuffle(array) {
            let currentIndex = array.length, randomIndex;
            while (currentIndex != 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
            }
            return array;
        }

        function initTrivia(mode) {
            state.currentView = 'trivia-game';
            state.trivia.mode = mode;
            state.trivia.score = 0;
            state.trivia.currentIndex = 0;
            state.trivia.active = true;

            let pool = [];
            if (mode === 'quick') pool = [...triviaData];
            else if (mode === 'tf') pool = triviaData.filter(q => q.type === 'tf');
            else if (mode === 'hard') {
                pool = triviaData.filter(q => q.diff === 'hard');
                if (pool.length < 5) pool = pool.concat(triviaData.filter(q => q.diff === 'medium'));
            } else if (mode === 'infinite') pool = [...triviaData];

            pool = shuffle([...pool]);
            state.trivia.questions = (mode !== 'infinite') ? pool.slice(0, 5) : pool;
            renderTriviaQuestion();
        }

        function renderTriviaQuestion() {
            const q = state.trivia.questions[state.trivia.currentIndex];
            let answers = q.type === 'tf' ? ["True", "False"] : shuffle([q.a, ...q.w]);
            let progress = state.trivia.mode === 'infinite' ? `Streak: ${state.trivia.score}` : `Q: ${state.trivia.currentIndex + 1}/5`;

            widgetContent.innerHTML = `
                <div class="flex flex-col h-full">
                    <button onclick="renderTriviaMenu()" class="text-xs text-gray-400 hover:text-gray-600 mb-2 self-start font-bold">Quit</button>
                    <div class="flex justify-between items-center text-xs text-gray-600 mb-3 bg-white p-2 rounded-lg shadow-sm border border-gray-100">
                        <span class="font-bold text-[#7C2639]">${progress}</span>
                        <span class="font-bold">Score: ${state.trivia.score}</span>
                    </div>
                    <div class="flex-grow flex items-center justify-center mb-4">
                        <h4 class="font-playfair font-bold text-base text-center leading-tight text-[#561722]">${q.q}</h4>
                    </div>
                    <div class="space-y-2">
                        ${answers.map(ans => `
                            <button onclick="handleTriviaAnswer('${ans.replace(/'/g, "\\'")}')" class="w-full py-2.5 px-3 bg-white hover:bg-[#E9D8A6] hover:text-[#561722] rounded-lg text-left transition font-medium border border-gray-200 shadow-sm active:scale-95 text-sm">
                                ${ans}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function handleTriviaAnswer(selected) {
            const q = state.trivia.questions[state.trivia.currentIndex];
            const isCorrect = selected === q.a;
            if (isCorrect) {
                state.trivia.score++;
                showFeedback(true);
            } else {
                showFeedback(false, state.trivia.mode === 'infinite');
            }
        }

        function showFeedback(correct, gameOver) {
            const q = state.trivia.questions[state.trivia.currentIndex];
            const color = correct ? 'text-green-600' : 'text-red-600';
            const icon = correct ? '<i class="fa-solid fa-check-circle text-4xl mb-2"></i>' : '<i class="fa-solid fa-circle-xmark text-4xl mb-2"></i>';
            const text = correct ? 'Correct!' : 'Wrong!';
            const sub = correct ? '' : `<p class="text-gray-600 mt-2 bg-white p-2 rounded border border-gray-200 text-sm">Answer: <span class="font-bold text-[#561722]">${q.a}</span></p>`;

            widgetContent.innerHTML = `
                <div class="flex flex-col h-full justify-center items-center text-center">
                    <div class="${color} flex flex-col items-center">
                        ${icon}<h3 class="text-2xl font-bold font-playfair">${text}</h3>
                    </div>
                    ${sub}
                </div>
            `;

            setTimeout(() => {
                if (gameOver) {
                    endTriviaGame();
                } else {
                    state.trivia.currentIndex++;
                    if (state.trivia.mode !== 'infinite' && state.trivia.currentIndex >= state.trivia.questions.length) {
                        endTriviaGame();
                    } else if (state.trivia.mode === 'infinite' && state.trivia.currentIndex >= state.trivia.questions.length) {
                        state.trivia.questions = shuffle([...triviaData]);
                        state.trivia.currentIndex = 0;
                        renderTriviaQuestion();
                    } else {
                        renderTriviaQuestion();
                    }
                }
            }, 1200);
        }

        function endTriviaGame() {
            const key = `trivia_hs_${state.trivia.mode}`;
            const currentHigh = parseInt(localStorage.getItem(key) || '0');
            let isNew = false;
            if (state.trivia.score > currentHigh) {
                localStorage.setItem(key, state.trivia.score);
                isNew = true;
            }

            widgetContent.innerHTML = `
                <div class="flex flex-col h-full justify-center items-center text-center space-y-4">
                    <div>
                        <h3 class="font-playfair text-2xl font-bold text-[#561722] mb-1">Game Over</h3>
                        <p class="text-gray-500 font-medium text-sm">You scored</p>
                        <div class="text-5xl font-bold text-[#7C2639] my-2">${state.trivia.score}</div>
                        ${isNew ? '<div class="text-green-600 font-bold text-xs bg-green-100 px-3 py-1 rounded-full">New High Score! 🏆</div>' : ''}
                    </div>
                    <div class="w-full space-y-2">
                        <button onclick="initTrivia('${state.trivia.mode}')" class="w-full bg-[#561722] text-white py-2.5 rounded-lg hover:bg-[#7C2639] transition font-semibold shadow text-sm">Play Again</button>
                        <button onclick="renderTriviaMenu()" class="w-full bg-gray-200 text-gray-700 py-2.5 rounded-lg hover:bg-gray-300 transition font-semibold text-sm">Menu</button>
                    </div>
                </div>
            `;
        }

        /* --- BIBLE APP FUNCTIONS --- */
        function renderBibleApp() {
            state.currentView = 'bible';
            widgetTitle.textContent = "Mini Bible";
            widgetContent.innerHTML = `
                <div class="flex flex-col h-full">
                    <button onclick="renderWidgetHome()" class="text-xs text-gray-500 hover:text-[#561722] mb-2 self-start flex items-center gap-1 font-bold"><i class="fa-solid fa-arrow-left"></i> Back</button>
                    <div class="flex gap-2 mb-3">
                        <input type="text" id="bible-input" placeholder="e.g. John 3:16" class="flex-grow border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-[#7C2639] transition-colors">
                        <button onclick="fetchVerse()" class="bg-[#561722] text-white px-3 py-2 rounded-lg hover:bg-[#7C2639] transition"><i class="fa-solid fa-search"></i></button>
                    </div>
                    <div id="bible-display" class="bg-white flex-grow rounded-lg p-4 border border-gray-100 overflow-y-auto text-sm leading-relaxed text-gray-700 shadow-inner">
                        <div class="flex flex-col h-full justify-center items-center text-center opacity-50">
                            <i class="fa-solid fa-book-open text-3xl mb-2 text-[#E9D8A6]"></i>
                            <p class="text-sm">Enter a reference or...</p>
                            <button onclick="fetchRandomVerse()" class="text-[#7C2639] font-bold mt-1 hover:underline text-sm">Get Random Verse</button>
                        </div>
                    </div>
                </div>
            `;
        }

        async function fetchVerse() {
            const input = document.getElementById('bible-input').value.trim();
            const display = document.getElementById('bible-display');
            if(!input) return;
            display.innerHTML = '<div class="flex justify-center h-full items-center"><i class="fa-solid fa-spinner fa-spin text-2xl text-[#561722]"></i></div>';
            try {
                const res = await fetch(`https://bible-api.com/${encodeURIComponent(input)}`);
                const data = await res.json();
                if (data.error) {
                    display.innerHTML = `<div class="flex flex-col h-full justify-center items-center text-center"><i class="fa-solid fa-triangle-exclamation text-2xl text-red-400 mb-2"></i><p class="text-red-500 font-bold text-sm">Verse not found.</p><p class="text-xs text-gray-400">Try "John 3:16"</p></div>`;
                } else {
                    display.innerHTML = `
                        <h4 class="font-playfair font-bold text-lg text-[#561722] mb-2 border-b border-[#E9D8A6]/30 pb-2">${data.reference}</h4>
                        <p class="text-sm italic text-gray-800 leading-6">"${data.text.trim()}"</p>
                    `;
                }
            } catch (e) {
                display.innerHTML = `<p class="text-red-500 text-center mt-4 font-bold text-sm">Connection Error</p>`;
            }
        }

        async function fetchRandomVerse() {
            const randoms = ["Jeremiah 29:11", "John 3:16", "Philippians 4:13", "Psalm 23:1", "Romans 8:28", "Isaiah 41:10", "Proverbs 3:5-6", "Joshua 1:9", "Matthew 28:19", "Psalm 46:10"];
            const pick = randoms[Math.floor(Math.random() * randoms.length)];
            document.getElementById('bible-input').value = pick;
            fetchVerse();
        }

        /* --- ENCOURAGEMENT --- */
        function renderEncouragement() {
            state.currentView = 'encouragement';
            widgetTitle.textContent = "Encouragement";
            const rand = encouragementData[Math.floor(Math.random() * encouragementData.length)];
            widgetContent.innerHTML = `
                <div class="flex flex-col h-full">
                    <button onclick="renderWidgetHome()" class="text-xs text-gray-500 hover:text-[#561722] mb-2 self-start flex items-center gap-1 font-bold"><i class="fa-solid fa-arrow-left"></i> Back</button>
                    <div id="encouragement-display" class="flex-grow flex flex-col justify-center items-center text-center p-4 bg-white rounded-lg mb-3 border border-[#E9D8A6]/50 shadow-sm relative overflow-hidden group">
                        <div class="absolute top-0 right-0 p-2 text-[#E9D8A6]/20 group-hover:text-[#E9D8A6]/40 transition duration-500"><i class="fa-solid fa-quote-right text-4xl"></i></div>
                        <p class="text-base font-playfair font-bold text-[#561722] mb-4 relative z-10 leading-snug">"${rand.text}"</p>
                        <span class="text-xs font-bold text-white bg-[#7C2639] px-3 py-1 rounded-full shadow uppercase tracking-wider">${rand.ref}</span>
                    </div>
                    <button onclick="newEncouragement()" class="w-full bg-[#561722] text-white py-2.5 rounded-lg hover:bg-[#7C2639] transition font-semibold shadow text-sm active:scale-95">
                        New Word <i class="fa-solid fa-rotate ml-1"></i>
                    </button>
                </div>
            `;
        }

        function newEncouragement() {
            const display = document.getElementById('encouragement-display');
            display.style.opacity = '0';
            display.style.transform = 'scale(0.95)';
            setTimeout(() => {
                const rand = encouragementData[Math.floor(Math.random() * encouragementData.length)];
                display.innerHTML = `
                    <div class="absolute top-0 right-0 p-2 text-[#E9D8A6]/20 group-hover:text-[#E9D8A6]/40 transition duration-500"><i class="fa-solid fa-quote-right text-4xl"></i></div>
                    <p class="text-base font-playfair font-bold text-[#561722] mb-4 relative z-10 leading-snug">"${rand.text}"</p>
                    <span class="text-xs font-bold text-white bg-[#7C2639] px-3 py-1 rounded-full shadow uppercase tracking-wider">${rand.ref}</span>
                `;
                display.style.transition = 'all 0.4s ease-out';
                display.style.opacity = '1';
                display.style.transform = 'scale(1)';
            }, 200);
        }

        /* --- PRAYER REQUEST --- */
        function renderPrayerRequest() {
            state.currentView = 'prayer';
            widgetTitle.textContent = "Prayer Request";
            widgetContent.innerHTML = `
                <div class="flex flex-col h-full">
                    <button onclick="renderWidgetHome()" class="text-xs text-gray-500 hover:text-[#561722] mb-2 self-start flex items-center gap-1 font-bold"><i class="fa-solid fa-arrow-left"></i> Back</button>
                    <form id="prayer-form" onsubmit="handlePrayerSubmit(event)" class="flex-grow flex flex-col space-y-3 bg-white p-3 rounded-lg shadow-sm border border-gray-100">
                        <div>
                            <label class="block text-xs font-bold text-[#7C2639] uppercase mb-1">Name (Optional)</label>
                            <input type="text" id="prayer-name" class="w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-[#7C2639] transition-colors" placeholder="Your name...">
                        </div>
                        <div class="flex-grow flex flex-col">
                            <label class="block text-xs font-bold text-[#7C2639] uppercase mb-1">How can we pray for you?</label>
                            <textarea id="prayer-text" class="w-full flex-grow border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-[#7C2639] resize-none transition-colors" placeholder="Share your request here..." required></textarea>
                        </div>
                        <button type="submit" class="w-full bg-[#561722] text-white py-2.5 rounded-lg hover:bg-[#7C2639] transition font-semibold shadow text-sm active:scale-95 flex justify-center items-center gap-2">
                            <span>Send Request</span> <i class="fa-solid fa-paper-plane"></i>
                        </button>
                    </form>
                </div>
            `;
        }

        function handlePrayerSubmit(e) {
            e.preventDefault();
            const name = document.getElementById('prayer-name').value;
            const text = document.getElementById('prayer-text').value;
            const form = document.getElementById('prayer-form');
            const btn = form.querySelector('button');
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Sending...';
            btn.disabled = true;
            btn.classList.add('opacity-75');

            setTimeout(() => {
                const requests = JSON.parse(localStorage.getItem('prayer_requests') || '[]');
                requests.push({ name: name || 'Anonymous', text, date: new Date().toISOString() });
                localStorage.setItem('prayer_requests', JSON.stringify(requests));

                widgetContent.innerHTML = `
                    <div class="flex flex-col h-full">
                        <button onclick="renderWidgetHome()" class="text-xs text-gray-500 hover:text-[#561722] mb-2 self-start flex items-center gap-1 font-bold"><i class="fa-solid fa-arrow-left"></i> Back</button>
                        <div class="flex-grow flex flex-col justify-center items-center text-center">
                            <div class="bg-green-100 p-4 rounded-full mb-4 shadow-sm">
                                <i class="fa-solid fa-check text-4xl text-green-600"></i>
                            </div>
                            <h4 class="font-playfair font-bold text-2xl text-[#561722] mb-2">Received!</h4>
                            <p class="text-gray-600 mb-6 max-w-[80%] mx-auto text-sm">Your prayer request has been sent. Our team will be praying for you.</p>
                            <button onclick="renderPrayerRequest()" class="text-xs font-bold text-[#7C2639] hover:underline bg-[#7C2639]/10 px-3 py-1.5 rounded-full transition-colors">Send another request</button>
                        </div>
                    </div>
                `;
            }, 1200);
        }
    </script>
</body>
</html>